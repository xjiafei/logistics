webpackJsonp([5],{"77zf":function(t,i){},DeDE:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("jbb4"),o=n("mvHQ"),r=n.n(o),a=n("pFYg"),c=n.n(a),s=n("Dd8w"),u=n.n(s),l=n("qiyf"),d=n.n(l),y=n("nDrS"),p=n.n(y),v=n("NYxO"),f={name:"my-cityList",data:function(){var t=this;return{loading:!1,submintA:!0,labelPosition:"left",user:{imgUlr:d.a,name:"小明管理员"},fromData:{country:null,province:null,city:null},rules:{country:[{required:!0,message:"请输入用户商家名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],province:[{required:!0,message:"请输入登陆账号",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],city:[{validator:function(i,n,e){if(!n)return e(new Error("请选择城市"));setTimeout(function(){if(t.getlist.data.indexOf(t.fromData.city)>=0)return e(new Error("该城市已有"));e()},300)},trigger:"change"}]},left:"left",getlist:{data:[]},options:[{code:"1",CN:"",EN:""}],provincePtions:[{code:"",CN:"",EN:""}],cityPtion:[{code:"",CN:"",EN:""}],provinceCheck:!0,countryData:[{country:{id:null,CN:null,EN:null,province:[{id:null,CN:null,EN:null,city:[{id:null,CN:null,EN:null}]}]}}]}},methods:u()({},Object(v.b)({setCityPost:"setCityList",getCityList:"getCityList"}),{tableRowClassName:function(t){t.row;var i=t.rowIndex%2;return 0===i?"":1===i?"success-row":""},handleCurrentChange:function(t){console.log("当前页: "+t)},login:function(){this.$router.push({name:"map"})},submitForm:function(t){var i=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;i.submintA=!1,i.getlist.data.push(i.fromData.city),i.cityListFn(i.getlist),i.fromData.country="",i.fromData.province="",i.fromData.city="",i.cityPtion=[{code:"",CN:"",EN:""}],i.provincePtions=[{code:"",CN:"",EN:""}]})},cityListFn:function(t){this.getlist=t,t=t.data;var i=[];for(var n in t){var e=p.a,o={country:{CN:"",id:"",EN:""},province:{CN:"",id:"",EN:""},city:{CN:"",id:"",EN:""}},r=t[n].split("_");o.country.id=r[0],o.country.CN=e[o.country.id].CN,o.country.EN=e[o.country.id].EN,r&&(o.province.id=o.country.id+"_"+r[1],o.province.CN=e[o.country.id][o.province.id].CN,o.country.EN=e[o.country.id][o.province.id].EN,o.city.id=o.province.id+"_"+r[2],o.city.CN=e[o.country.id][o.province.id][o.city.id].CN,o.city.EN=e[o.country.id][o.province.id][o.city.id].EN),i.push(o)}for(var a=[],c=[],s={},u=0;u<i.length;u++){var l=i[u].country.id;s[l]?c.push({pid:i[u].country.id,id:i[u].province.id,CN:i[u].province.CN,EN:i[u].province.EN,city:[{id:i[u].city.id,CN:i[u].city.CN,EN:i[u].city.EN}]}):(a.push({country:{id:i[u].country.id,CN:i[u].country.CN,EN:i[u].country.EN,province:[{id:i[u].province.id,CN:i[u].province.CN,EN:i[u].province.EN,city:[{id:i[u].city.id,CN:i[u].city.CN,EN:i[u].city.EN}]}]}}),s[l]=!0)}for(var d in c)for(var y in a){var v=!0;if(c[d].pid==a[y].country.id){for(var f in a[y].country.province)if(c[d].id==a[y].country.province[f].id){var m=a[y].country.province[f].city,h=c[d].city,N=m.concat(h);v=!1,a[y].country.province[f].city=N}v&&a[y].country.province.push(c[d])}}this.countryData=a},cityChange:function(t){if("country"==t){var i=p.a[this.fromData.country];this.provincePtions=this.citPotin(i,"country"),this.fromData.province="",this.fromData.city="",this.provincePtions[0].check?(this.provinceCheck=!1,this.fromData.province=this.provincePtions[0].code,t="province"):(this.provinceCheck=!0,t="country")}if("province"==t){i=p.a[this.fromData.country][this.fromData.province];this.cityPtion=this.citPotin(i),this.fromData.city=""}},citPotin:function(t,i){var n=[],e={code:null,EN:null,CN:null};for(var o in t)"country"?t[o].EN?(e={code:o,EN:t[o].EN,CN:t[o].CN},n.push(e)):"object"==c()(t[o])&&(e={code:o,EN:t[o].EN,CN:t[o].CN||"直辖市（州）",check:!0},n.push(e)):t[o].EN&&(e={code:o,EN:t[o].EN,CN:t[o].CN},n.push(e));return n},updateCity:function(){var t=sessionStorage.getItem("user");t=r()(t);var i={companyId:"1",cityList:this.getlist.data};this.loading=!0,this.setCityPost(i)},delCityFn:function(t){var i=this.getlist.data;this.submintA=!1,1==i.length&&(this.submintA=!0);for(var n in i)if(t==i[n])return i.splice(n,1),void this.cityListFn(this.getlist.data)},listStatus:function(t){if(this.loading=!1,0==t.status){this.openSuccess(t.message);var i={company:"大洋运输"};this.getCityList(i),this.options=this.citPotin(p.a)}0!=t.status&&this.openError(t.message),this.$store.commit("updateStatusTo",{body:null})},openSuccess:function(t){this.$message({message:t,type:"success"})},openError:function(t){this.$message.error(t)}}),computed:u()({cityList:function(){var t=this.cityListData;return t&&this.cityListFn(t.body),1},updateStatusData:function(){var t=this.updateStatus;return t&&this.listStatus(t),1}},Object(v.c)(["addOderData","updateStatus","language","cityListData"])),mounted:function(){this.getCityList({company:"大洋运输"}),this.options=this.citPotin(p.a)},components:{}},m={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"clearfix",attrs:{updateStatusData:t.updateStatusData,"element-loading-text":"请稍后...","element-loading-spinner":"el-icon-loading","element-loading-background":"#f7f7f7"}},[n("div",{staticClass:"fromBox left"},[n("el-form",{ref:"fromData",attrs:{"label-position":t.labelPosition,"label-width":"83px",model:t.fromData,rules:t.rules}},[n("el-form-item",{attrs:{label:"国家"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(i){t.cityChange("country")}},model:{value:t.fromData.country,callback:function(i){t.$set(t.fromData,"country",i)},expression:"fromData.country"}},t._l(t.options,function(t){return n("el-option",{key:t.code,attrs:{label:t.CN,value:t.code}})}))],1),t._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.provinceCheck,expression:"provinceCheck"}],attrs:{label:"省份（州）"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(i){t.cityChange("province")}},model:{value:t.fromData.province,callback:function(i){t.$set(t.fromData,"province",i)},expression:"fromData.province"}},t._l(t.provincePtions,function(t){return n("el-option",{key:t.code,attrs:{label:t.CN,value:t.code}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"城市",prop:"city"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(i){t.cityChange("city")}},model:{value:t.fromData.city,callback:function(i){t.$set(t.fromData,"city",i)},expression:"fromData.city"}},t._l(t.cityPtion,function(t){return n("el-option",{key:t.code,attrs:{label:t.CN,value:t.code}})}))],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("el-button",{staticClass:"submit",attrs:{type:"primary",round:""},on:{click:function(i){t.submitForm("fromData")}}},[t._v(" 选择 ")])],1)],1)],1),t._v(" "),n("div",{staticClass:"cityBox left"},[n("div",{staticClass:"ctiye",attrs:{cityList:t.cityList}},t._l(t.countryData,function(i){return n("div",{staticStyle:{"text-align":"left"}},[n("div",{staticClass:"contyName"},[n("span",{staticClass:"Country"},[t._v("\n                        "+t._s(i.country.CN))]),t._v(" "),n("div",{staticClass:"cleae"})]),t._v(" "),n("div",{staticClass:"cityList"},t._l(i.country.province,function(i){return n("div",{staticStyle:{"font-size":"12px","line-height":"30px"}},[t._v("\n            "+t._s(i.CN?i.CN+"：":"")+"\n            "),t._l(i.city,function(i){return n("span",{staticClass:"cityBoxText"},[t._v("\n              "+t._s(i.CN)+"\n              "),n("i",{staticClass:"el-icon-circle-close",on:{click:function(n){n.stopPropagation(),t.delCityFn(i.id)}}})])})],2)}))])})),t._v(" "),n("el-button",{staticClass:"submit",staticStyle:{margin:"0px","margin-top":"10px"},attrs:{type:"primary",round:"",disabled:t.submintA},on:{click:function(i){t.updateCity()}}},[t._v(" 提交 ")])],1)])},staticRenderFns:[]},h=n("VU/8")(f,m,!1,function(t){n("brCP")},"data-v-a91a97b0",null).exports,N={name:"my-city",data:function(){return{fromData:{userName:null,password:null,clientType:1},remember:!1,error:!1,defaultLayers:null,ui:null,list:[],bubble:null,routeInstructionsContainer:null,input:null}},methods:{login:function(){this.$router.push({name:"map"})}},computed:{},mounted:function(){this.$store.commit("updateNave",{logo:!1,login:!1,us:!0,language:!0,user:!1,nav:!1})},components:{HeaderPublc:e.a,cent:h}},C={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"set"},[i("section",{attrs:{id:"header"}},[i("HeaderPublc")],1),this._v(" "),i("div",{attrs:{id:"cent"}},[i("cent")],1),this._v(" "),i("section",{attrs:{id:"footer"}})])},staticRenderFns:[]},g=n("VU/8")(N,C,!1,function(t){n("77zf")},"data-v-4fd3659f",null);i.default=g.exports},brCP:function(t,i){}});
//# sourceMappingURL=5.14e1e95bd36c71914c82.js.map
webpackJsonp([9],{CPPE:function(t,i){},nQW2:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a("mvHQ"),e=a.n(s),n=a("Dd8w"),o=a.n(n),r=a("orAT"),c=a("V33R"),l=a.n(c),p=a("AMmF"),u=a("nDrS"),d=a.n(u),v=a("NYxO"),h=a("EMXe"),y=a("Iu90"),m=a.n(y),g=(a("LPE6"),a("+EAe")),C=a.n(g),f=(a("VeD2"),a("xnxj")),_=a.n(f),N=(a("tZ6o"),a("uL0D")),b=a.n(N),x=(a("YUF+"),{name:"my-Chart",data:function(){return{showSaech:!1,input:null,startTime:null,year:null,list:[{id:"AKDFAKJ2",startPosition:{country:"china",city:"Beijing",address:"XXXXX"},endPosition:{country:"china",city:"Beijing",address:"XXXXX"},transportStatus:1,transportType:2},{id:"AKDFAKJ2",startPosition:{country:"china",city:"Beijing",address:"XXXXX"},endPosition:{country:"china",city:"Beijing",address:"XXXXX"},transportStatus:1,transportType:2}],listData:[],loading:!1,countryData:[{country:{id:null,CN:null,EN:null,province:[{id:null,CN:null,EN:null,city:[{id:null,CN:null,EN:null}]}]}}],visible1:!1,visible2:!1,cityText:{EN:"起运地",CN:"起运地",bol:!0},cityTextEnd:{EN:"目的地",CN:"目的地",bol:!0},time:"",form:{startDate:null,endDate:null,startPosition:{country:"",state:"",city:""},endPosition:{country:"",state:"",city:""},transportType:[0],transportStatus:-1,page:"",pageCount:""},transportTypelist:[{value:0,label:"火车"},{value:1,label:"汽车"},{value:2,label:"轮船"},{value:3,label:"飞机"}],transportStatuslist:[{value:-1,label:"全部状态"},{value:0,label:"运输中"},{value:1,label:"运输完成"}],pages:{page:1,pageSize:10,cunt:null}}},methods:o()({},Object(v.b)({transportListpost:"history",updateTansportStatuspost:"updateTansportStatus",delPost:"deletefn",checkID:"checkId",mapListFn:"mapListFn",getCityList:"getCityList",transportListpostH:"searchList"}),{handleCurrentChange:function(t){this.pages.page=parseInt(t),this.input?this.saechFn(!0):this.showSaech?this.sechH(!0):this.saechList(!0)},allCity:function(t){1==t&&(this.form.startPosition={country:"",state:"",city:""},this.cityText={EN:"all city",CN:"不限城市",bol:!0},this.visible1=!1),2==t&&(this.form.endPosition={country:"",state:"",city:""},this.cityTextEnd={EN:"all city",CN:"不限城市",bol:!0},this.visible2=!1)},saechList:function(t){this.loading=!0;var i={id:1,page:t?this.pages.page:1,pageSize:this.pages.pageSize};this.transportListpost(i)},saechFn:function(t){if(this.loading=!0,this.input){var i={code:this.input};this.checkID(i)}else{i={id:1};this.transportListpost(i)}},listFn:function(t){if(this.loading=!1,t.body.count){var i=t.body.count;this.pages.cunt=Math.ceil(i/this.pages.pageSize)}t=t.body.data;this.listData=[];var a=[];for(var s in t){var e,n,o,r;n=t[s].createTime?p.a.publicLo.timeCheng(t[s].createTime):{ymd:null,hms:null,times:null,s:null,d:null,m:null,md:null,week:null,y:null},r=t[s].completeTime?p.a.publicLo.timeCheng(t[s].completeTime):{ymd:null,hms:null,times:null,s:null,d:null,m:null,md:null,week:null,y:null};var c=p.a.publicLo.dataChange();if(c.y+c.m==n.y+n.m){var l=parseInt(c.d),u=parseInt(n.d);l==u?o="今天":l-u==1&&(o="昨天")}e=this.ransportSwitch(t[s].transportType);var v,h=d.a[t[s].startPosition.country],y=d.a[t[s].endPosition.country];h||(h={CN:"",EN:""}),y||(y={CN:"",EN:""}),v=t[s].deviceOnff&&1==t[s].deviceOnff?{CN:"开",EN:"ON"}:0==t[s].deviceOnff?{CN:"关",EN:"OFF"}:{CN:"异常",EN:"error"},t[s].newAddress?t[s].newAddress.length>10&&(t[s].newAddress=t[s].newAddress.substring(0,10)+"..."):t[s].newAddress="未请求到数据";var m={id:t[s].id,containerId:t[s].containerId,ladingId:t[s].billNumber,deviceId:t[s].deviceNumber,deviceOnff:t[s].deviceOnff,deviceOnfftext:v,startPosition:h.CN,endPosition:y.CN,startPositionEn:h.EN,endPositionEn:y.EN,transportStatus:t[s].transportStatus,transportType:t[s].transportType,deviceStatus:0,time:n.hms,year:parseInt(n.y),month:n.m,data:n.d,dateText:o,transportTypeText:e.type,transportTypeTextEn:e.typeEn,icon:e.icon,now:t[s].newAddress,ymd:n.ymd+" "+n.hms,completeTime:r.ymd+" "+r.hms};m.startPosition.length>4&&(m.startPosition=m.startPosition.substring(0,4)+"..."),m.endPosition.length>4&&(m.endPosition=m.endPosition.substring(0,4)+"..."),m.startPositionEn.length>8&&(m.startPositionEn=m.startPositionEn.substring(0,8)+"..."),m.endPositionEn.length>8&&(m.endPositionEn=m.endPositionEn.substring(0,8)+"..."),0==s?this.year=m.year:this.year==m.year&&(m.year=""),a.push(m)}this.listData=a},ransportSwitch:function(t){var i;switch(t){case 0:i={type:"火车",icon:b.a,typeEn:"Train"};break;case 1:i={type:"汽车",icon:m.a,typeEn:"Motor"};break;case 2:i={type:"轮船",icon:_.a,typeEn:"Freighter"};break;case 3:i={type:"飞机",icon:C.a,typeEn:"Flight"};break;default:i={type:"异常",icon:m.a}}return i},updatStatusFn:function(t){var i={id:e()(t),transportStatus:"1"};this.updateTansportStatuspost(i)},del:function(t){this.loading=!0;var i={id:e()(t)};this.delPost(i)},listStatus:function(t){0==t.status&&(this.openSuccess(t.message),this.input?this.saechFn():this.saechList()),0!=t.status&&this.openError(t.message),this.$store.commit("updateStatusTo",{body:null})},gomap:function(t){return this.$store.commit("addMapList",null),this.$router.push({name:"map",query:{id:t.id}}),!1},goChart:function(t){this.$router.push({name:"chartSon",query:{id:t.id}})},sechH:function(t){var i="",a="",s={page:t?this.pages.page:1,pageSize:this.pages.pageSize};this.form.startDate&&(i=(i=p.a.publicLo.dataChange(this.form.startDate[0])).time,a=(a=p.a.publicLo.dataChange(this.form.startDate[1])).time,s.startDate=i,s.startDate=a),this.form.startPosition.country&&(s.startPosition=this.form.startPosition),this.form.endPosition.country&&(s.endPosition=this.form.endPosition),this.form.transportType.length>0&&(s.transportType=e()(this.form.transportType)),-1==this.form.transportStatus||(s.transportStatus=this.form.transportStatus),this.transportListpostH(s)},cityListFn:function(t){t=t.data;var i=[];for(var a in t){var s=d.a,e={country:{CN:"",id:"",EN:""},province:{CN:"",id:"",EN:""},city:{CN:"",id:"",EN:""}},n=t[a].split("_");e.country.id=n[0],e.country.CN=s[e.country.id].CN,e.country.EN=s[e.country.id].EN,n&&(e.province.id=e.country.id+"_"+n[1],e.province.CN=s[e.country.id][e.province.id].CN,e.country.EN=s[e.country.id][e.province.id].EN,e.city.id=e.province.id+"_"+n[2],e.city.CN=s[e.country.id][e.province.id][e.city.id].CN,e.city.EN=s[e.country.id][e.province.id][e.city.id].EN),i.push(e)}for(var o=[],r=[],c={},l=0;l<i.length;l++){var p=i[l].country.id;c[p]?r.push({pid:i[l].country.id,id:i[l].province.id,CN:i[l].province.CN,EN:i[l].province.EN,city:[{id:i[l].city.id,CN:i[l].city.CN,EN:i[l].city.EN}]}):(o.push({country:{id:i[l].country.id,CN:i[l].country.CN,EN:i[l].country.EN,province:[{id:i[l].province.id,CN:i[l].province.CN,EN:i[l].province.EN,city:[{id:i[l].city.id,CN:i[l].city.CN,EN:i[l].city.EN}]}]}}),c[p]=!0)}for(var u in r)for(var v in o){var h=!0;if(r[u].pid==o[v].country.id){for(var y in o[v].country.province)if(r[u].id==o[v].country.province[y].id){var m=o[v].country.province[y].city,g=r[u].city,C=m.concat(g);h=!1,o[v].country.province[y].city=C}h&&o[v].country.province.push(r[u])}}this.countryData=o},clickCity:function(t,i,a,s,e,n,o){if(1==t){this.form.startPosition.city=i.id;var r=this.form.startPosition.city.split("_");this.cityText={EN:a+"/"+i.EN,CN:s+"/"+i.CN},e&&n&&(this.cityText={EN:a+"/"+e+"/"+i.EN,CN:s+"/"+n+"/"+i.CN}),this.form.startPosition.country=r[0],this.form.startPosition.state=r[0]+"_"+r[1],this.cityText.bol=!1,this.visible1=!1}if(2==t){this.form.endPosition.city=i.id;r=this.form.endPosition.city.split("_");this.cityTextEnd={EN:a+"/"+i.EN,CN:s+"/"+i.CN},e&&(this.cityTextEnd={EN:a+"/"+e+"/"+i.EN,CN:s+"/"+n+"/"+i.CN}),this.form.endPosition.country=r[0],this.form.endPosition.state=r[0]+"_"+r[1],this.cityTextEnd.bol=!1,this.visible2=!1}},openSuccess:function(t){this.$message({message:t,type:"success"})},openError:function(t){this.$message.error(t)},copyFn:function(t){new l.a(".copy");this.openSuccess("复制成功")}}),computed:o()({transport:function(){var t=this.transportList;return t&&t.body&&this.listFn(t),1},updateStatusData:function(){var t=this.updateStatus;return t&&this.listStatus(t),1},mapListData:function(){this.mapList;return 1},cityList:function(){var t=this.cityListData;return t&&this.cityListFn(t.body),1},languageData:function(){var t=this.language;return t&&("Chinese"==t.check&&(t=t.Chinese),"English"==t.check&&(t=t.English)),t}},Object(v.c)(["transportList","updateStatus","language","mapList","cityListData"])),mounted:function(){this.getCityList({company:"大洋运输"}),this.saechList()},components:{ElButton:h.a,HeaderPublc:r.a}}),E={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("section",{attrs:{id:"header"}},[a("HeaderPublc")],1),t._v(" "),a("section",{attrs:{id:"cent"}},[a("div",{staticClass:"top"}),t._v(" "),a("div",{staticClass:"center"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showSaech,expression:"!showSaech"}],staticClass:"saech",staticStyle:{width:"680px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"saechIput",attrs:{placeholder:t.languageData.public.sechText},domProps:{value:t.input},on:{input:function(i){i.target.composing||(t.input=i.target.value)}}}),t._v(" "),a("el-button",{staticClass:"saechBout",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(i){t.saechFn()}}}),t._v(" "),a("el-button",{staticClass:"saechBoutH",attrs:{type:"primary"},on:{click:function(i){t.showSaech=!t.showSaech}}},[t._v(" 高级查询")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showSaech,expression:"showSaech"}],staticClass:"saech clearfix",staticStyle:{"text-align":"left",width:"1200px","min-width":"980px","max-width":"1500px"}},[a("div",{staticClass:"saechl"},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.startDate,callback:function(i){t.$set(t.form,"startDate",i)},expression:"form.startDate"}}),t._v(" "),a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:"",placeholder:"交通工具"},model:{value:t.form.transportType,callback:function(i){t.$set(t.form,"transportType",i)},expression:"form.transportType"}},t._l(t.transportTypelist,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"运输状态"},model:{value:t.form.transportStatus,callback:function(i){t.$set(t.form,"transportStatus",i)},expression:"form.transportStatus"}},t._l(t.transportStatuslist,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"saechl",staticStyle:{width:"690px",margin:"auto"}},[a("div",{staticClass:"left"},[a("el-popover",{ref:"popover4",attrs:{placement:"bottom",width:"376",trigger:"click",cityList:t.cityList},model:{value:t.visible1,callback:function(i){t.visible1=i},expression:"visible1"}},[a("div",{staticClass:"noAddress"},[a("span",{staticClass:"all",on:{click:function(i){t.allCity(1)}}},[t._v("不限城市")])]),t._v(" "),a("div",{staticClass:"ctiye"},t._l(t.countryData,function(i){return a("div",[a("div",{staticClass:"contyName"},[a("span",{staticClass:"Country"},[t._v("\n                        "+t._s(i.country.CN))]),t._v(" "),a("div",{staticClass:"cleae"})]),t._v(" "),a("div",{staticClass:"cityList"},t._l(i.country.province,function(s){return a("div",{staticStyle:{"font-size":"12px","line-height":"30px"}},[t._v("\n                      "+t._s(s.CN?s.CN+"：":"")+"\n                      "),t._l(s.city,function(e){return a("span",{staticClass:"cityBox",on:{click:function(a){t.clickCity(1,e,i.country.EN,i.country.CN,s.EN,s.CN,i.country.id)}}},[t._v("\n                        "+t._s(e.CN)+"\n                       ")])})],2)}))])}))]),t._v(" "),a("div",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],staticClass:"addresst addressFrom"},[a("span",{staticStyle:{"margin-right":"10px",color:"#b4bccc"}},[t._v(t._s(t.cityText.CN))]),t._v(" "),a("span",{staticClass:"down el-icon-arrow-down"})])],1),t._v(" "),a("div",{staticClass:"left"},[a("el-popover",{ref:"popover3",attrs:{placement:"bottom",width:"376",trigger:"click",cityList:t.cityList},model:{value:t.visible2,callback:function(i){t.visible2=i},expression:"visible2"}},[a("div",{staticClass:"noAddress"},[a("span",{staticClass:"all",on:{click:function(i){t.allCity(2)}}},[t._v("不限城市")])]),t._v(" "),a("div",{staticClass:"ctiye"},t._l(t.countryData,function(i){return a("div",[a("div",{staticClass:"contyName"},[a("span",{staticClass:"Country"},[t._v("\n                        "+t._s(i.country.CN))]),t._v(" "),a("div",{staticClass:"cleae"})]),t._v(" "),a("div",{staticClass:"cityList"},t._l(i.country.province,function(s){return a("div",{staticStyle:{"font-size":"12px","line-height":"30px"}},[t._v("\n                      "+t._s(s.CN?s.CN+"：":"")+"\n                      "),t._l(s.city,function(e){return a("span",{staticClass:"cityBox",on:{click:function(a){t.clickCity(2,e,i.country.EN,i.country.CN,s.EN,s.CN,i.country.id)}}},[t._v("\n                        "+t._s(e.CN)+"\n                       ")])})],2)}))])}))]),t._v(" "),a("div",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"addresst addressFrom"},[a("span",{staticStyle:{"margin-right":"10px",color:"#b4bccc"}},[t._v(t._s(t.cityTextEnd.CN))]),t._v(" "),a("span",{staticClass:"down el-icon-arrow-down"})])],1),t._v(" "),a("div",{staticClass:"left"},[a("el-button",{staticClass:"saechBout",staticStyle:{"border-radius":"0px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(i){t.sechH()}}}),t._v(" "),a("el-button",{staticClass:"saechBoutH",staticStyle:{"margin-left":"0px"},attrs:{type:"primary"},on:{click:function(i){t.showSaech=!t.showSaech}}},[t._v(" 基础查询")])],1),t._v(" "),a("div",{staticClass:"cleae"})]),t._v(" "),a("div",{staticClass:"cleae"})]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"cardBox clearfix",attrs:{transport:t.transport,"element-loading-text":t.languageData.public.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"#f7f7f7"}},t._l(t.listData,function(i){return a("div",{staticClass:"card clearfix"},[a("div",{staticClass:"span4 device left clearfix",on:{click:function(a){t.goChart(i)}}},[a("div",{staticClass:" textBox address clearfix"},[a("div",{staticClass:"left ctiy"},[t._v(t._s("Chinese"==t.languageData.id?i.startPosition:i.startPositionEn))]),t._v(" "),a("div",{staticClass:"left iconBox"},[a("div",{staticClass:"iocn"},[a("img",{attrs:{src:i.icon}})]),t._v(" "),a("div",{staticClass:"l"}),t._v(" "),a("p",{staticClass:"go"},[t._v(t._s(0==i.transportStatus?"运输中":1==i.transportStatus?"运输完成":2==i.transportStatus?"运输错误":"异常"))])]),t._v(" "),a("div",{staticClass:"left ctiy"},[t._v(t._s("Chinese"==t.languageData.id?i.endPosition:i.endPositionEn))]),t._v(" "),a("div",{staticClass:"cleae"}),t._v(" "),a("div",{staticClass:"text"},[a("p",{staticClass:"goMap",staticStyle:{cursor:"pointer"},on:{click:function(a){a.stopPropagation(),t.gomap(i)}}},[a("i",{staticClass:"el-icon-location"}),t._v(" "+t._s(t.languageData.header.transport)+"："+t._s(i.now)),a("i",{staticClass:"el-icon-arrow-right"})])])])]),t._v(" "),a("div",{staticClass:"span3 device left  clearfix"},[a("div",{staticClass:"textBox deviceT",staticStyle:{position:"relative"}},[a("p",{on:{click:function(a){t.goChart(i)}}},[a("label",[t._v(t._s(t.languageData.public.plalte)+"：")]),a("span",[t._v(t._s(i.containerId))])]),t._v(" "),a("p",{on:{click:function(a){t.goChart(i)}}},[a("label",[t._v(t._s(t.languageData.public.ladingIdBill)+"：")]),a("span",[t._v(t._s(i.ladingId))])]),t._v(" "),a("p",{on:{click:function(a){t.goChart(i)}}},[a("label",[t._v(t._s(t.languageData.public.container)+"：")]),a("span",[t._v(t._s(i.deviceId))])]),t._v(" "),a("span",{staticClass:"copy",attrs:{"data-clipboard-text":i.containerId},on:{click:function(i){t.copyFn(i)}}},[t._v(" "+t._s(t.languageData.public.copy)+" ")])])]),t._v(" "),a("div",{staticClass:"span3 device left clearfix",attrs:{mapListData:t.mapListData},on:{click:function(a){t.goChart(i)}}},[a("div",{staticClass:"deviceStatus textBox deviceT"},[a("p",[a("label",[t._v(t._s(t.languageData.public.modeOfTransport)+"： ")]),a("span",[t._v(" "+t._s("Chinese"==t.languageData.id?i.transportTypeText:i.transportTypeTextEn)+" ")])]),t._v(" "),a("p",[a("label",[t._v(t._s(t.languageData.public.status)+"： ")]),a("span",[t._v(" "+t._s(0==i.transportStatus?"运输中":1==i.transportStatus?"运输完成":2==i.transportStatus?"运输错误":"异常")+"  ")])]),t._v(" "),a("p",[a("label",[t._v(t._s(t.languageData.public.deviceStatus)+"： ")]),a("span",[t._v(" "+t._s("Chinese"==t.languageData.id?i.deviceOnfftext.CN:i.deviceOnfftext.EN)+"  ")])]),t._v(" "),a("p",[a("label",[t._v(t._s(t.languageData.public.creaedTime)+"： ")]),a("span",[t._v(" "+t._s(i.ymd)+" ")])]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"null null"!=i.completeTime,expression:"list.completeTime != 'null null'"}]},[a("label",[t._v("完成时间：  ")]),a("span",[t._v(" "+t._s(i.completeTime)+" ")])])])]),t._v(" "),a("div",{staticClass:"cleae"}),t._v(" "),a("div",{staticClass:"timeDate"},[a("p",{staticClass:"year"},[t._v(" "+t._s(i.year?i.year:""))]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:i.dateText,expression:"list.dateText"}],staticClass:"data"},[t._v(t._s(i.dateText))]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!i.dateText,expression:"!list.dateText"}],staticClass:"data"},[a("span",[t._v(" "+t._s(i.data))]),t._v(" "),a("i",{staticClass:"month"},[t._v(" "+t._s(parseInt(i.month))+" "+t._s(t.languageData.public.month))])])]),t._v(" "),a("div",{staticClass:"set"},[a("div",[a("el-button",{staticClass:"bot",attrs:{round:"",updateStatusData:t.updateStatusData},on:{click:function(a){a.stopPropagation(),t.del(i.id)}}},[t._v(t._s(t.languageData.public.Delete))])],1)])])})),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticStyle:{"text-align":"right",width:"70%","min-width":"980px","max-width":"1500px","padding-bottom":"40px",margin:"auto"}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.pages.cunt>1,expression:"pages.cunt>1"}],attrs:{layout:"prev, pager, next","page-count":t.pages.cunt},on:{"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("div",{staticClass:"botList"})]),t._v(" "),a("section",{staticStyle:{"text-align":"right"},attrs:{id:"footer"}})])},staticRenderFns:[]},S=a("VU/8")(x,E,!1,function(t){a("CPPE")},"data-v-1ff7c746",null);i.default=S.exports}});
//# sourceMappingURL=9.e0410d3ac1b2a4db64d9.js.map
webpackJsonp([8],{VhBS:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),r=i.n(n),a=i("orAT"),s=i("zLv/"),o=i.n(s),c=i("LPE6"),l=i.n(c),d=i("jl7J"),u=i.n(d),p=i("VeD2"),y=i.n(p),v=i("MJug"),f=i.n(v),m=i("tZ6o"),g=i.n(m),h=i("bF/D"),N=i.n(h),b=i("YUF+"),C=i.n(b),_=i("nDrS"),E=i.n(_),x=i("NYxO"),T={name:"my-oder",data:function(){return{oderId:null,visible2:!1,visible1:!1,form:{containerId:null,ladingId:null,deviceId:null,transportType:0,startPosition:{country:null,city:null,address:null},endPosition:{country:null,city:null,address:null},frequencyType:"min",locateFrequency:null},options:[{value:"15分钟",label:"15分钟"},{value:"1个小时",label:"1个小时"},{value:"2个小时",label:"2个小时"},{value:"3个小时",label:"3个小时"},{value:"12个小时",label:"12个小时"},{value:"1天",label:"1天"}],transportType:[{iconDlf:C.a,icon:N.a,text:"火车",check:!0,id:0},{iconDlf:l.a,icon:o.a,text:"汽车",check:!1,id:1},{iconDlf:g.a,icon:f.a,text:"轮船",check:!1,id:2},{iconDlf:y.a,icon:u.a,text:"飞机",check:!1,id:3}],ctiye:null,list:["1_41_18","1_41_12","1_41_7","BEL_#_WBR","BEL_#_WLX","NZL_#_NSH","1_61_9"],rules:{containerId:[{required:!0,message:"请输入柜号/车牌号",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],ladingId:[{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],deviceId:[{required:!0,message:"请输入设备号",trigger:"blur"}],transportType:[{type:"number",required:!0,message:"请选择运输方式",trigger:"change"}],"startPosition.address":[{required:!0,message:"填写起运地",trigger:"blur"}],"endPosition.address":[{required:!0,message:"填写目的地",trigger:"blur"}],locateFrequency:[{required:!0,message:"请选择发送频率",trigger:"blur"}]},formConfig:{labelWidth:"150px"},cityText:{EN:null,CN:null,bol:!0},cityTextEnd:{EN:null,CN:null,bol:!0},countryData:[{country:{id:null,CN:null,EN:null,province:[{id:null,CN:null,EN:null,city:[{id:null,CN:null,EN:null}]}]}}]}},methods:r()({},Object(x.b)({addOderPost:"addOderPost",getCityList:"getCityList"}),{changeFn:function(){},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var i=e.form;i.locateFrequency.indexOf("分钟")>0&&(i.frequencyType="min"),i.locateFrequency.indexOf("小时")>0&&(i.frequencyType="hour"),i.locateFrequency.indexOf("天")>0&&(i.frequencyType="day"),e.addOderPost(i)})},addFn:function(t){if(0==(t=t.body).status){this.openSuccess("新跟踪记录创建成功")}0!=t.status&&this.openError(t.message),this.form={containerId:null,ladingId:null,deviceId:null,transportType:0,startPosition:{country:null,city:null,address:null},endPosition:{country:null,city:null,address:null},frequencyType:"min",locateFrequency:null},this.cityText={EN:null,CN:null,bol:!0},this.cityTextEnd={EN:null,CN:null,bol:!0},this.$store.commit("addOder",null)},clickType:function(t){for(var e in this.transportType)this.transportType[e].check=!1,e==t.id&&(this.transportType[e].check=!0);this.form.transportType=t.id},updateDate:function(t){for(var e in this.transportType)switch(this.transportType[e].id){case 0:this.transportType[e].text=t.public.train;break;case 1:this.transportType[e].text=t.public.motor;break;case 2:this.transportType[e].text=t.public.freighter;break;case 3:this.transportType[e].text=t.public.Flight}},openSuccess:function(t){this.$message({message:t,type:"success"})},openError:function(t){this.$message.error(t)},cityListFn:function(t){t=t.data;var e=[];for(var i in t){var n=E.a,r={country:{CN:"",id:"",EN:""},province:{CN:"",id:"",EN:""},city:{CN:"",id:"",EN:""}},a=t[i].split("_");r.country.id=a[0],r.country.CN=n[r.country.id].CN,r.country.EN=n[r.country.id].EN,a&&(r.province.id=r.country.id+"_"+a[1],r.province.CN=n[r.country.id][r.province.id].CN,r.country.EN=n[r.country.id][r.province.id].EN,r.city.id=r.province.id+"_"+a[2],r.city.CN=n[r.country.id][r.province.id][r.city.id].CN,r.city.EN=n[r.country.id][r.province.id][r.city.id].EN),e.push(r)}for(var s=[],o=[],c={},l=0;l<e.length;l++){var d=e[l].country.id;c[d]?o.push({pid:e[l].country.id,id:e[l].province.id,CN:e[l].province.CN,EN:e[l].province.EN,city:[{id:e[l].city.id,CN:e[l].city.CN,EN:e[l].city.EN}]}):(s.push({country:{id:e[l].country.id,CN:e[l].country.CN,EN:e[l].country.EN,province:[{id:e[l].province.id,CN:e[l].province.CN,EN:e[l].province.EN,city:[{id:e[l].city.id,CN:e[l].city.CN,EN:e[l].city.EN}]}]}}),c[d]=!0)}for(var u in o)for(var p in s){var y=!0;if(o[u].pid==s[p].country.id){for(var v in s[p].country.province)if(o[u].id==s[p].country.province[v].id){var f=s[p].country.province[v].city,m=o[u].city,g=f.concat(m);y=!1,s[p].country.province[v].city=g}y&&s[p].country.province.push(o[u])}}this.countryData=s},clickCity:function(t,e,i,n,r,a,s){1==t&&(this.cityText={EN:i+"/"+e.EN,CN:n+"/"+e.CN},r&&a&&(this.cityText={EN:i+"/"+r+"/"+e.EN,CN:n+"/"+a+"/"+e.CN}),this.form.startPosition.address="",this.form.startPosition.country=s,this.form.startPosition.city=e.id,this.cityText.bol=!1,this.visible1=!1),2==t&&(this.cityTextEnd={EN:i+"/"+e.EN,CN:n+"/"+e.CN},r&&(this.cityTextEnd={EN:i+"/"+r+"/"+e.EN,CN:n+"/"+a+"/"+e.CN}),this.form.endPosition.address="",this.form.endPosition.country=s,this.form.endPosition.city=e.id,this.cityTextEnd.bol=!1,this.visible2=!1)}}),computed:r()({add:function(){var t=this.addOderData;return t&&this.addFn(t),t},languageData:function(){var t=this.language;return t&&("Chinese"==t.check&&(t=t.Chinese),"English"==t.check&&(t=t.English,this.formConfig.labelWidth="200px"),this.updateDate(t)),t},cityList:function(){var t=this.cityListData;return t&&this.cityListFn(t.body),1}},Object(x.c)(["addOderData","language","cityListData"])),mounted:function(){if("English"==this.languageData.id){var t=document.getElementById("formBox"),e=document.getElementsByClassName("addressChart");t.style="width:692px;",e[0].style="width :470px;",e[1].style="width :470px;"}this.getCityList({company:"大洋运输"})},components:{HeaderPublc:a.a}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("section",{attrs:{id:"header"}},[i("HeaderPublc")],1),t._v(" "),i("section",{attrs:{id:"cent",ds:t.add}},[i("div",{staticClass:"center"},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":t.formConfig.labelWidth,"label-position":"left",id:"formBox"}},[i("el-form-item",{attrs:{label:t.languageData.public.plalte,prop:"containerId"}},[i("el-input",{model:{value:t.form.containerId,callback:function(e){t.$set(t.form,"containerId",e)},expression:"form.containerId"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.languageData.public.ladingIdBill,prop:"ladingId"}},[i("el-input",{model:{value:t.form.ladingId,callback:function(e){t.$set(t.form,"ladingId",e)},expression:"form.ladingId"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.languageData.public.container,prop:"deviceId"}},[i("el-input",{model:{value:t.form.deviceId,callback:function(e){t.$set(t.form,"deviceId",e)},expression:"form.deviceId"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.languageData.public.modeOfTransport,prop:"transportType"}},[i("div",{staticClass:"clearfix"},t._l(t.transportType,function(e){return i("div",{staticClass:"iconBox clearfix"},[i("div",{staticClass:"left img",class:{check:e.check},on:{click:function(i){t.clickType(e)}}},[i("img",{staticClass:"imgSrc",attrs:{src:e.check?e.iconDlf:e.icon}})]),t._v(" "),i("span",{staticClass:"left"},[i("p",[t._v(t._s(e.text))])])])}))]),t._v(" "),i("el-form-item",{attrs:{label:t.languageData.public.departure,prop:"startPosition.address"}},[i("el-popover",{ref:"popover4",attrs:{placement:"bottom",width:"376",trigger:"click",cityList:t.cityList},model:{value:t.visible1,callback:function(e){t.visible1=e},expression:"visible1"}},[i("div",{staticClass:"ctiye"},t._l(t.countryData,function(e){return i("div",[i("div",{staticClass:"contyName"},[i("div",{staticClass:"flag"},[i("img",{attrs:{src:""}})]),t._v(" "),i("span",{staticClass:"Country"},[t._v("\n                        "+t._s(e.country.CN))]),t._v(" "),i("div",{staticClass:"cleae"})]),t._v(" "),i("div",{staticClass:"cityList"},t._l(e.country.province,function(n){return i("div",{staticStyle:{"font-size":"12px","line-height":"30px"}},[t._v("\n                       "+t._s(n.CN?n.CN+"：":"")+"\n                       "),t._l(n.city,function(r){return i("span",{staticClass:"cityBox",on:{click:function(i){t.clickCity(1,r,e.country.EN,e.country.CN,n.EN,n.CN,e.country.id)}}},[t._v("\n                        "+t._s(r.CN)+"\n                       ")])})],2)}))])}))]),t._v(" "),i("div",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],staticClass:"address addressFrom"},[t._v("\n               "+t._s(t.cityText.CN)+"\n               "),i("span",{staticClass:"down el-icon-arrow-down"})]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入详细地址",disabled:t.cityText.bol},model:{value:t.form.startPosition.address,callback:function(e){t.$set(t.form.startPosition,"address",e)},expression:"form.startPosition.address"}})],1),t._v(" "),i("el-popover",{ref:"popover3",attrs:{placement:"bottom",width:"376",trigger:"click"},model:{value:t.visible2,callback:function(e){t.visible2=e},expression:"visible2"}},[i("div",{staticClass:"ctiye"},t._l(t.countryData,function(e){return i("div",[i("div",{staticClass:"contyName"},[i("div",{staticClass:"flag"},[i("img",{attrs:{src:""}})]),t._v(" "),i("span",{staticClass:"Country"},[t._v("\n                        "+t._s(e.country.CN))]),t._v(" "),i("div",{staticClass:"cleae"})]),t._v(" "),i("div",{staticClass:"cityList"},t._l(e.country.province,function(n){return i("div",{staticStyle:{"font-size":"12px","line-height":"30px"}},[t._v("\n                     "+t._s(n.CN?n.CN+"：":"")+"\n                     "),t._l(n.city,function(r){return i("span",{staticClass:"cityBox",on:{click:function(i){t.clickCity(2,r,e.country.EN,e.country.CN,n.EN,n.CN,e.country.id)}}},[t._v("\n                        "+t._s(r.CN)+"\n                       ")])})],2)}))])}))]),t._v(" "),i("el-form-item",{attrs:{label:t.languageData.public.desitnation,prop:"endPosition.address"}},[i("p",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"address addressTo"},[t._v("\n               "+t._s(t.cityTextEnd.CN)+"\n               "),i("span",{staticClass:"down el-icon-arrow-down"})]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入详细地址",disabled:t.cityTextEnd.bol},model:{value:t.form.endPosition.address,callback:function(e){t.$set(t.form.endPosition,"address",e)},expression:"form.endPosition.address"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.languageData.public.frequencyGPS}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(e){t.changeFn()}},model:{value:t.form.locateFrequency,callback:function(e){t.$set(t.form,"locateFrequency",e)},expression:"form.locateFrequency"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:""}},[i("div",{staticStyle:{"text-align":"left"}},[i("el-button",{staticClass:"submit",attrs:{type:"primary",round:""},on:{click:function(e){t.submitForm("form")}}},[t._v(" "+t._s(t.languageData.public.done)+" ")])],1)])],1)],1)])])},staticRenderFns:[]},D=i("VU/8")(T,k,!1,function(t){i("jnyc")},"data-v-424c5cf0",null);e.default=D.exports},jnyc:function(t,e){}});
//# sourceMappingURL=8.0d3d04ce94ccb1d8abb5.js.map
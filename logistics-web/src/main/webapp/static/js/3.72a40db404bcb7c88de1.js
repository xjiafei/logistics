webpackJsonp([3],{"0/C8":function(t,e){},OhVW:function(t,e){},n3aj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("jbb4"),i=a("mvHQ"),r=a.n(i),o=a("Dd8w"),n=a.n(o),l=a("qiyf"),c=a.n(l),u=a("nDrS"),d=a.n(u),m=a("AMmF"),g=a("NYxO"),v={name:"my-divseList",created:function(){var t=sessionStorage.getItem("user");t&&(t=JSON.parse(t),this.user.name=t.nickName,this.user.type=t.type,this.user.userId=t.userId,this.user.companyName=t.companyName,this.user.companyId=t.companyId)},data:function(){var t=this;return{user:{imgUlr:c.a,name:"小明管理员",type:"",userId:null,companyName:null,companyId:null},fromShow:!1,userSaech:null,Record:[{id:"",remarkTo:"",remarkFrom:"",createTime:"",toStatus:"",toStatusText:""}],tableData2:[{id:"No Data",deviceNumber:"No Data",model:"No Data",battery:"No Data",deviceStatus:"No Data",usageStatus:"No Data",deviceStatusText:"No Data",usageStatusText:"No Data",company:"No Data",location:"No Data"}],style1:{height:"70px"},style2:{height:"70px",border:"none 0px",background:"#d9dddd","margin-top":"25px"},fromData:{deviceId:null,usageStatus:"1",recyclePosition:{country:null,city:null,address:""},deviceNumber:"",page:1,pageSize:10,count:1,page2:1,pageSize2:20,count2:1},rules:{usageStatus:[{required:!0,message:"请选择回收状态",trigger:"blur"}],address:[{validator:function(e,a,s){t.recyclePosition.address?s():s(new Error("回收地不能为空"))},trigger:"blur"}]},dialogVisible:!1,dialogVisible2:!1,labelPosition:"left"}},methods:n()({},Object(g.b)({updateDeviceUsageStatus:"updateDeviceUsageStatus",getDeviceList:"getDeviceList",addDeviceRecord:"addDeviceRecord",showManages:"showManages"}),{tableRowClassName:function(t){t.row;var e=t.rowIndex%2;return 0===e?"":1===e?"success-row":""},handleCurrentChange:function(t){this.fromData.page=parseInt(t);var e={companyName:this.user.companyName,deviceNumber:this.fromData.deviceNumber,page:this.fromData.page,pageSize:this.fromData.pageSize};this.getDeviceList(e)},handleClose:function(t){this.dialogVisible=!0},handleClose2:function(t){this.dialogVisible2=!0},saechFn:function(){this.fromData.page=1,this.fromData.pageSize=10;var t={companyId:this.user.companyId,deviceNumber:this.fromData.deviceNumber,page:this.fromData.page,pageSize:this.fromData.pageSize};this.getDeviceList(t)},deviceListFn:function(t){if(t.body.count){var e=t.body.count;this.fromData.count=Math.ceil(e/this.fromData.pageSize)}t=t.body.data,this.tableData2=[];for(var a in t){var s="English"==this.languageData.id?"abnormal":"异常",i="English"==this.languageData.id?"abnormal":"异常";0==t[a].deviceStatus&&(s="关机","English"==this.languageData.id&&(s="ON")),1==t[a].deviceStatus&&(s="开机","English"==this.languageData.id&&(s="OFF")),0==t[a].usageStatus&&(i="不可用","English"==this.languageData.id&&(i="Unavailable")),1==t[a].usageStatus&&(i="闲置中","English"==this.languageData.id&&(i="idle")),2==t[a].usageStatus&&(i="使用中","English"==this.languageData.id&&(i="Use")),3==t[a].usageStatus&&(i="回收中","English"==this.languageData.id&&(i="recovery"));var r={id:t[a].id,deviceNumber:t[a].deviceNumber,model:t[a].model,battery:t[a].battery+"%",deviceStatus:t[a].deviceStatus,usageStatus:t[a].usageStatus,deviceStatusText:s+"("+t[a].battery+"%)",usageStatusText:i,company:t[a].company,location:t[a].location||"位置异常"};this.tableData2.push(r)}},updateDeviceUsageStatusFn:function(t,e){if(this.fromData.deviceId=t,1==e)this.dialogVisible=!0;else{this.fromData.page2=1,this.fromData.pageSize2=20;var a={deviceId:JSON.parse(t),page:this.fromData.page2,pageSize:this.fromData.pageSize2};this.showManages(a),this.dialogVisible2=!0}},updateStatusPost:function(){if(!this.fromData.text){return this.openError("备注不能为空"),!1}var t={deviceId:r()(this.fromData.deviceId),status:1,location:r()(this.fromData.recyclePosition)};this.addDeviceRecord(t),this.dialogVisible=!1},login:function(){this.$router.push({name:"map"})},listStatus:function(t){if(this.loading=!1,0==t.status){this.openSuccess(t.message);var e={companyId:this.user.companyId,deviceNumber:this.fromData.deviceNumber,page:this.fromData.page,pageSize:this.fromData.pageSize};this.getDeviceList(e)}if(0!=t.status)if(1==t.status){this.openSuccess("成功");e={deviceId:JSON.parse(this.fromData.deviceId),page:this.fromData.page2,pageSize:this.fromData.pageSize2};this.showManages(e),this.fromData.recyclePosition={country:null,city:null,address:null}}else this.openError(t.message);this.$store.commit("updateStatusTo",{body:null})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t||!e.fromData.recyclePosition.address)return console.log("error submit!!"),!1;var a={deviceId:r()(e.fromData.deviceId),status:JSON.parse(e.fromData.usageStatus),location:r()(e.fromData.recyclePosition)};e.addDeviceRecord(a)})},RecordListFn:function(t){var e="",a={ymd:"",hms:"",times:"",week:"",md:"",m:"",d:"",s:"",y:""};t=t.body.data,this.Record=[];for(var s in t){var i={},r="";t[s].createTime&&(a=m.a.publicLo.timeCheng(t[s].createTime));var o=JSON.parse(t[s].remark),n="";if(o.address?(n=o.address,i.address=o.address):(n="",i.address=""),o.city){var l=o.city.split("_"),c=o.country;i.country=d.a[c];var u=o.country+"_"+l[1];i.city=d.a[c][u][o.city],n=i.address?i.country.CN+"/"+i.city.CN+"/"+i.address:i.country.CN+"/"+i.city.CN}else i.country="",i.city="";1==t[s].toStatus?(r="闲置中",e=""):r=2==t[s].toStatus?"使用中":3==t[s].toStatus?"回收中":"异常";var g={id:t[s].id,remarkTo:e,remarkFrom:n,createTime:a.times,toStatus:t[s].toStatus,toStatusText:r};e=n,this.Record.unshift(g)}},openSuccess:function(t){this.$message({message:t,type:"success"})},openError:function(t){this.$message({message:t,type:"error"})}}),computed:n()({DeviceListData:function(){var t=this.DeviceList;return t&&this.deviceListFn(t),1},UserListData:function(){var t=this.updateStatus;return t&&this.listStatus(t),1},languageData:function(){var t=this.language;return t&&("Chinese"==t.check&&(t=t.Chinese),"English"==t.check&&(t=t.English)),t},RecordListData:function(){var t=this.RecordList;return t&&this.RecordListFn(t),1}},Object(g.c)(["updateStatus","addOderData","language","DeviceList","RecordList"])),mounted:function(){var t={companyId:this.user.companyId,deviceNumber:this.fromData.deviceNumber,page:this.fromData.page,pageSize:this.fromData.pageSize};this.getDeviceList(t)},components:{}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userList"}},[a("el-dialog",{attrs:{visible:t.dialogVisible,width:"430px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{attrs:{placeholder:"请输入回收地址"},model:{value:t.fromData.recyclePosition.address,callback:function(e){t.$set(t.fromData.recyclePosition,"address",e)},expression:"fromData.recyclePosition.address"}}),t._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",size:"medium",round:""},on:{click:function(e){t.updateStatusPost()}}},[t._v("确 定")]),t._v(" "),a("el-button",{staticStyle:{width:"120px"},attrs:{size:"medium",round:""},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible2,width:"50%"},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("div",{staticClass:"alertBox"},t._l(t.Record,function(e){return a("div",{staticClass:"card"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"timeLabel left"},[t._v(t._s(e.createTime))]),t._v(" "),a("div",{staticClass:"left"},[t._v(" "+t._s(e.toStatusText))]),a("div",{staticClass:"cleae"})]),t._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"timeLabel left"}),a("div",[a("span",{staticClass:"city"},[t._v(t._s(e.remarkTo))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.remarkFrom&&e.remarkTo,expression:"list.remarkFrom && list.remarkTo"}],staticClass:"el-icon-back back"}),t._v(" "),a("span",{staticClass:"city"},[t._v(t._s(e.remarkFrom))])]),t._v(" "),a("div",{staticClass:"cleae"})])])})),t._v(" "),a("div",{staticClass:"card",staticStyle:{"padding-top":"40px"}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"timeLabel left"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.fromShow,expression:"!fromShow"}],staticStyle:{width:"120px"},attrs:{size:"medium",round:""},on:{click:function(e){t.fromShow=!0}}},[t._v("添加记录")])],1),t._v(" "),a("div",{staticClass:"left"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.fromShow,expression:"fromShow"}],staticClass:"border"},[a("el-form",{ref:"fromData",attrs:{"label-position":t.labelPosition,"label-width":"100px",model:t.fromData,rules:t.rules}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"回收状态",prop:"usageStatus"}},[a("el-radio",{attrs:{label:"3"},model:{value:t.fromData.usageStatus,callback:function(e){t.$set(t.fromData,"usageStatus",e)},expression:"fromData.usageStatus"}},[t._v("回收中")]),t._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.fromData.usageStatus,callback:function(e){t.$set(t.fromData,"usageStatus",e)},expression:"fromData.usageStatus"}},[t._v("回收完成")])],1),t._v(" "),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"回收地点",prop:"recyclePosition.address"}},[a("el-input",{model:{value:t.fromData.recyclePosition.address,callback:function(e){t.$set(t.fromData.recyclePosition,"address",e)},expression:"fromData.recyclePosition.address"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:""}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticClass:"submit",staticStyle:{width:"150px"},attrs:{round:""},on:{click:function(e){t.submitForm("fromData")}}},[t._v(" 完成 ")])],1)])],1)],1)]),t._v(" "),a("div",{staticClass:"cleae"})])])]),t._v(" "),a("div",{staticClass:"sech clearfix",attrs:{RecordListData:t.RecordListData}},[a("div",{staticClass:"left",staticStyle:{width:"50%","margin-bottom":"25px"},attrs:{UserListData:t.UserListData}},[a("el-input",{staticClass:"saechIput",attrs:{placeholder:t.languageData.public.container},model:{value:t.fromData.deviceNumber,callback:function(e){t.$set(t.fromData,"deviceNumber",e)},expression:"fromData.deviceNumber"}}),t._v(" "),a("el-button",{staticClass:"saechBout",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.saechFn()}}})],1),t._v(" "),a("div",{staticClass:"right",staticStyle:{width:"50%","text-align":"right"}},[a("el-button",{staticClass:"bot",attrs:{size:"medium",icon:"el-icon-delete"}},[t._v("删除")])],1),t._v(" "),a("div",{staticClass:"tableBox",attrs:{DeviceListData:t.DeviceListData}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData2,"row-class-name":t.tableRowClassName,"row-style":t.style1,"header-row-style":t.style2}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deviceNumber",label:t.languageData.admin.ImeiNo}}),t._v(" "),a("el-table-column",{attrs:{prop:"model",label:t.languageData.admin.deviceType}}),t._v(" "),a("el-table-column",{attrs:{prop:"company",label:t.languageData.admin.deviceOwer}}),t._v(" "),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{prop:"deviceStatusText",label:t.languageData.admin.deviceStatus+"("+t.languageData.admin.battery+")",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"usageStatusText",label:t.languageData.admin.Usages,width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:t.languageData.admin.Location,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"clickBot",staticStyle:{"margin-left":"20px"},on:{click:function(a){t.updateDeviceUsageStatusFn(e.row.id)}}},[a("a",[t._v(t._s("Chinese"==t.languageData.id?"详情":"details"))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:t.languageData.admin.set,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"clickBot el-icon-edit-outline"},[a("span",{staticStyle:{"padding-left":"10px"},on:{click:function(a){t.updateDeviceUsageStatusFn(e.row.id,1)}}},[t._v(t._s("Chinese"==t.languageData.id?"回收":"recovery"))])])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"cleae",staticStyle:{"text-align":"right","padding-right":"20px","padding-top":"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-count":t.fromData.count},on:{"current-change":t.handleCurrentChange}})],1)])],1)},staticRenderFns:[]},h=a("VU/8")(v,p,!1,function(t){a("0/C8")},"data-v-71197ff0",null).exports,f={name:"my-login",data:function(){return{fromData:{userName:null,password:null,clientType:1},remember:!1,error:!1,defaultLayers:null,ui:null,list:[],bubble:null,routeInstructionsContainer:null,input:null}},methods:{login:function(){this.$router.push({name:"map"})}},computed:{},mounted:function(){this.$store.commit("updateNave",{logo:!1,login:!1,us:!0,language:!0,user:!1,nav:!1})},components:{HeaderPublc:s.a,cent:h}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set"},[e("section",{attrs:{id:"header"}},[e("HeaderPublc")],1),this._v(" "),e("div",{attrs:{id:"cent"}},[e("cent")],1),this._v(" "),e("section",{attrs:{id:"footer"}})])},staticRenderFns:[]},D=a("VU/8")(f,b,!1,function(t){a("OhVW")},"data-v-7719e51e",null);e.default=D.exports}});
//# sourceMappingURL=3.72a40db404bcb7c88de1.js.map
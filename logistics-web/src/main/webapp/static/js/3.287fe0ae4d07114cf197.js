webpackJsonp([3],{OhVW:function(t,a){},fiLb:function(t,a){},n3aj:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("jbb4"),i=e("mvHQ"),r=e.n(i),o=e("Dd8w"),n=e.n(o),l=e("qiyf"),c=e.n(l),u=e("nDrS"),d=e.n(u),m=e("AMmF"),g=e("NYxO"),p={name:"my-divseList",created:function(){var t=sessionStorage.getItem("user");t&&(t=JSON.parse(t),this.user.name=t.nickName,this.user.type=t.type,this.user.userId=t.userId,this.user.companyName=t.companyName,this.user.companyId=t.companyId)},data:function(){return{user:{imgUlr:c.a,name:"小明管理员",type:"",userId:null,companyName:null,companyId:null},fromShow:!1,userSaech:null,Record:[{id:"",remarkTo:"",remarkFrom:"",createTime:"",toStatus:"",toStatusText:""}],tableData2:[{id:"No Data",deviceNumber:"No Data",model:"No Data",battery:"No Data",deviceStatus:"No Data",usageStatus:"No Data",deviceStatusText:"No Data",usageStatusText:"No Data",company:"No Data",location:"No Data"}],style1:{height:"70px"},style2:{height:"70px",border:"none 0px",background:"#d9dddd","margin-top":"25px"},fromData:{deviceId:null,usageStatus:"1",recyclePosition:{country:null,city:null,address:""},deviceNumber:"",address:"",page:1,pageSize:10,count:1,page2:1,pageSize2:20,count2:1},rules:{usageStatus:[{required:!0,message:"请选择回收状态",trigger:"blur"}],address:[{required:!0,message:"请填写回收地址",trigger:"blur"}]},dialogVisible:!1,dialogVisible2:!1,labelPosition:"left"}},methods:n()({},Object(g.b)({updateDeviceUsageStatus:"updateDeviceUsageStatus",getDeviceList:"getDeviceList",addDeviceRecord:"addDeviceRecord",showManages:"showManages"}),{tableRowClassName:function(t){t.row;var a=t.rowIndex%2;return 0===a?"":1===a?"success-row":""},handleCurrentChange:function(t){this.fromData.page=parseInt(t);var a={companyName:this.user.companyName,deviceNumber:this.fromData.deviceNumber,page:this.fromData.page,pageSize:this.fromData.pageSize};this.getDeviceList(a)},handleClose:function(t){this.dialogVisible=!0},handleClose2:function(t){this.dialogVisible2=!0},saechFn:function(){this.fromData.page=1,this.fromData.pageSize=10;var t={companyId:this.user.companyId,deviceNumber:this.fromData.deviceNumber,page:this.fromData.page,pageSize:this.fromData.pageSize};this.getDeviceList(t)},deviceListFn:function(t){if(t.body.count){var a=t.body.count;this.fromData.count=Math.ceil(a/this.fromData.pageSize)}t=t.body.data,this.tableData2=[];for(var e in t){var s="English"==this.languageData.id?"abnormal":"异常",i="English"==this.languageData.id?"abnormal":"异常";0==t[e].deviceStatus&&(s="关机","English"==this.languageData.id&&(s="ON")),1==t[e].deviceStatus&&(s="开机","English"==this.languageData.id&&(s="OFF")),0==t[e].usageStatus&&(i="不可用","English"==this.languageData.id&&(i="Unavailable")),1==t[e].usageStatus&&(i="闲置中","English"==this.languageData.id&&(i="idle")),2==t[e].usageStatus&&(i="使用中","English"==this.languageData.id&&(i="Use")),3==t[e].usageStatus&&(i="回收中","English"==this.languageData.id&&(i="recovery")),4==t[e].usageStatus&&(i="待回收","English"==this.languageData.id&&(i="recycled"));var r={id:t[e].id,deviceNumber:t[e].deviceNumber,model:t[e].model,battery:t[e].battery+"%",deviceStatus:t[e].deviceStatus,usageStatus:t[e].usageStatus,deviceStatusText:s+"("+t[e].battery+"%)",usageStatusText:i,company:t[e].company,location:t[e].location||"位置异常"};this.tableData2.push(r)}},updateDeviceUsageStatusFn:function(t,a){if(this.fromData.deviceId=t,1==a)this.dialogVisible=!0;else{this.fromData.page2=1,this.fromData.pageSize2=20;var e={deviceId:JSON.parse(t),page:this.fromData.page2,pageSize:this.fromData.pageSize2};this.showManages(e),this.dialogVisible2=!0}},updateStatusPost:function(){if(!this.fromData.text){return this.openError("备注不能为空"),!1}var t={deviceId:r()(this.fromData.deviceId),status:1,location:r()(this.fromData.recyclePosition)};this.addDeviceRecord(t),this.dialogVisible=!1},login:function(){this.$router.push({name:"map"})},listStatus:function(t){if(this.loading=!1,0==t.status){this.openSuccess(t.message);var a={companyId:this.user.companyId,deviceNumber:this.fromData.deviceNumber,page:this.fromData.page,pageSize:this.fromData.pageSize};this.getDeviceList(a)}if(0!=t.status)if(1==t.status){this.openSuccess("成功");a={deviceId:JSON.parse(this.fromData.deviceId),page:this.fromData.page2,pageSize:this.fromData.pageSize2};this.showManages(a),this.fromData.recyclePosition={country:null,city:null,address:null}}else this.openError(t.message);this.$store.commit("updateStatusTo",{body:null})},submitForm:function(t){var a=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;a.fromData.recyclePosition.address=a.fromData.address;var e={deviceId:r()(a.fromData.deviceId),status:JSON.parse(a.fromData.usageStatus),location:r()(a.fromData.recyclePosition)};a.addDeviceRecord(e),a.dialogVisible=!1})},RecordListFn:function(t){var a="",e={ymd:"",hms:"",times:"",week:"",md:"",m:"",d:"",s:"",y:""};t=t.body.data,this.Record=[];for(var s in t){var i={},r="";t[s].createTime&&(e=m.a.publicLo.timeCheng(t[s].createTime));var o=JSON.parse(t[s].remark),n="";if(o.address?(n=o.address,i.address=o.address):(n="",i.address=""),o.city){var l=o.city.split("_"),c=o.country;i.country=d.a[c];var u=o.country+"_"+l[1];i.city=d.a[c][u][o.city],n=i.address?i.country.CN+"/"+i.city.CN+"/"+i.address:i.country.CN+"/"+i.city.CN}else i.country="",i.city="";1==t[s].toStatus?(r="闲置中",a=""):r=2==t[s].toStatus?"使用中":3==t[s].toStatus?"回收中":4==t[s].toStatus?"待回收":"异常";var g={id:t[s].id,remarkTo:a,remarkFrom:n,createTime:e.times,toStatus:t[s].toStatus,toStatusText:r};a=n,this.Record.unshift(g)}},openSuccess:function(t){this.$message({message:t,type:"success"})},openError:function(t){this.$message({message:t,type:"error"})}}),computed:n()({DeviceListData:function(){var t=this.DeviceList;return t&&this.deviceListFn(t),1},UserListData:function(){var t=this.updateStatus;return t&&this.listStatus(t),1},languageData:function(){var t=this.language;return t&&("Chinese"==t.check&&(t=t.Chinese),"English"==t.check&&(t=t.English)),t},RecordListData:function(){var t=this.RecordList;return t&&this.RecordListFn(t),1}},Object(g.c)(["updateStatus","addOderData","language","DeviceList","RecordList"])),mounted:function(){var t={companyId:this.user.companyId,deviceNumber:this.fromData.deviceNumber,page:this.fromData.page,pageSize:this.fromData.pageSize};this.getDeviceList(t)},components:{}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"userList"}},[e("el-dialog",{attrs:{visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("el-form",{ref:"fromData",attrs:{"label-position":t.labelPosition,"label-width":"100px",model:t.fromData,rules:t.rules}},[e("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"回收状态",prop:"usageStatus"}},[e("el-radio",{attrs:{label:"3"},model:{value:t.fromData.usageStatus,callback:function(a){t.$set(t.fromData,"usageStatus",a)},expression:"fromData.usageStatus"}},[t._v("回收中")]),t._v(" "),e("el-radio",{attrs:{label:"1"},model:{value:t.fromData.usageStatus,callback:function(a){t.$set(t.fromData,"usageStatus",a)},expression:"fromData.usageStatus"}},[t._v("回收完成")])],1),t._v(" "),e("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"回收地点",prop:"address"}},[e("el-input",{model:{value:t.fromData.address,callback:function(a){t.$set(t.fromData,"address",a)},expression:"fromData.address"}})],1),t._v(" "),e("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:""}},[e("div",{staticStyle:{"text-align":"right"}},[e("el-button",{staticClass:"el-button--primary",staticStyle:{width:"120px"},attrs:{round:""},on:{click:function(a){t.submitForm("fromData")}}},[t._v(" 完成 ")]),t._v(" "),e("el-button",{staticStyle:{width:"120px"},attrs:{round:""},on:{click:function(a){t.dialogVisible=!1}}},[t._v("取 消")])],1)])],1)],1),t._v(" "),e("el-dialog",{attrs:{visible:t.dialogVisible2,width:"40%"},on:{"update:visible":function(a){t.dialogVisible2=a}}},[e("div",{staticClass:"alertBox"},t._l(t.Record,function(a){return e("div",{staticClass:"card"},[e("div",{staticClass:"clearfix"},[e("div",{staticClass:"timeLabel left"},[t._v(t._s(a.createTime))]),t._v(" "),e("div",{staticClass:"left"},[t._v(" "+t._s(a.toStatusText))]),e("div",{staticClass:"cleae"})]),t._v(" "),e("div",{staticClass:"clearfix"},[e("div",{staticClass:"timeLabel left"}),e("div",[e("span",{staticClass:"city"},[t._v(t._s(a.remarkTo))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.remarkFrom&&a.remarkTo,expression:"list.remarkFrom && list.remarkTo"}],staticClass:"el-icon-back back"}),t._v(" "),e("span",{staticClass:"city"},[t._v(t._s(a.remarkFrom))])]),t._v(" "),e("div",{staticClass:"cleae"})])])})),t._v(" "),e("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{width:"120px"},attrs:{size:"medium",round:""},on:{click:function(a){t.dialogVisible2=!1}}},[t._v("关闭")])],1)]),t._v(" "),e("div",{staticClass:"sech clearfix",attrs:{RecordListData:t.RecordListData}},[e("div",{staticClass:"left",staticStyle:{width:"50%","margin-bottom":"25px"},attrs:{UserListData:t.UserListData}},[e("el-input",{staticClass:"saechIput",attrs:{placeholder:t.languageData.public.container},model:{value:t.fromData.deviceNumber,callback:function(a){t.$set(t.fromData,"deviceNumber",a)},expression:"fromData.deviceNumber"}}),t._v(" "),e("el-button",{staticClass:"saechBout",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(a){t.saechFn()}}})],1),t._v(" "),e("div",{staticClass:"right",staticStyle:{width:"50%","text-align":"right"}}),t._v(" "),e("div",{staticClass:"tableBox",attrs:{DeviceListData:t.DeviceListData}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData2,"row-class-name":t.tableRowClassName,"row-style":t.style1,"header-row-style":t.style2}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{prop:"deviceNumber",label:t.languageData.admin.ImeiNo}}),t._v(" "),e("el-table-column",{attrs:{prop:"model",label:t.languageData.admin.deviceType}}),t._v(" "),e("el-table-column",{attrs:{prop:"company",label:t.languageData.admin.deviceOwer}}),t._v(" "),e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{prop:"deviceStatusText",label:t.languageData.admin.deviceStatus+"("+t.languageData.admin.battery+")",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"usageStatusText",label:t.languageData.admin.Usages,width:"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"",label:t.languageData.admin.Location,width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"clickBot",staticStyle:{"margin-left":"20px"},on:{click:function(e){t.updateDeviceUsageStatusFn(a.row.id)}}},[e("a",[t._v(t._s("Chinese"==t.languageData.id?"详情":"details"))])])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:t.languageData.admin.set,width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{directives:[{name:"show",rawName:"v-show",value:4==a.row.deviceStatus||3==a.row.deviceStatus,expression:"scope.row.deviceStatus == 4 || scope.row.deviceStatus == 3"}],staticClass:"clickBot el-icon-edit-outline"},[e("span",{staticStyle:{"padding-left":"10px"},on:{click:function(e){t.updateDeviceUsageStatusFn(a.row.id,1)}}},[t._v(t._s("Chinese"==t.languageData.id?"回收":"recovery"))])])]}}])})],1)],1),t._v(" "),e("div",{staticClass:"cleae",staticStyle:{"text-align":"right","padding-right":"20px","padding-top":"20px"}},[e("el-pagination",{attrs:{layout:"prev, pager, next","page-count":t.fromData.count},on:{"current-change":t.handleCurrentChange}})],1)])],1)},staticRenderFns:[]},h=e("VU/8")(p,v,!1,function(t){e("fiLb")},"data-v-68f8f818",null).exports,f={name:"my-login",data:function(){return{fromData:{userName:null,password:null,clientType:1},remember:!1,error:!1,defaultLayers:null,ui:null,list:[],bubble:null,routeInstructionsContainer:null,input:null}},methods:{login:function(){this.$router.push({name:"map"})}},computed:{},mounted:function(){this.$store.commit("updateNave",{logo:!1,login:!1,us:!0,language:!0,user:!1,nav:!1})},components:{HeaderPublc:s.a,cent:h}},D={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"set"},[a("section",{attrs:{id:"header"}},[a("HeaderPublc")],1),this._v(" "),a("div",{attrs:{id:"cent"}},[a("cent")],1),this._v(" "),a("section",{attrs:{id:"footer"}})])},staticRenderFns:[]},b=e("VU/8")(f,D,!1,function(t){e("OhVW")},"data-v-7719e51e",null);a.default=b.exports}});
//# sourceMappingURL=3.287fe0ae4d07114cf197.js.map
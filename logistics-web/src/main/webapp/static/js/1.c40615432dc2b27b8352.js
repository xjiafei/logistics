webpackJsonp([1],{POKb:function(t,s){},a2Yd:function(t,s){},k2bH:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("mvHQ"),a=i.n(e),n=i("Dd8w"),l=i.n(n),o=i("orAT"),c=i("NYxO"),r=i("AMmF"),u=i("yKu/"),h=i.n(u),p={name:"index",created:function(){this.check=this.$route.name;var t=r.a.publicLo.sessionStorageGet("user");t&&(t=JSON.parse(t),this.user={nickName:t.nickName,headImg:t.headImg,id:t.userId})},data:function(){return{boll:!1,showBox:!1,offset:-350,platform:null,behavior:null,defaultLayers:null,ui:null,list:[],user:{nickName:null,headImg:null,id:null},bubble:null,routeInstructionsContainer:null,input:null,logoImg:h.a}},methods:l()({},Object(c.b)({mapListFn:"mapListFn",loginFn:"loginFn",checkID:"checkId",checkNumber:"checkNumber"}),{goMap:function(t){var s={id:t};this.mapListFn(s),this.$store.commit("shechDat",this.input),this.$router.push({name:"map",query:{id:t}})},sechlistFn:function(){this.showBox=!this.showBox;var t=this.input;if(t){if(!(t=t.replace(/(^\s*)|(\s*$)/g," ")))return!1;var s={code:this.input};this.$store.commit("transportListTo",null),this.user.id?this.checkNumber(s):this.checkID(s)}}}),computed:l()({checkIdList:function(){var t=this.shechIput,s=null;return t&&(s=t,this.firstSech=!1,this.listFn()),s},languageData:function(){var t=this.language;return t&&("Chinese"==t.check&&(t=t.Chinese),"English"==t.check&&(t=t.English)),t},transport:function(){var t=this.transportList||null;return t&&(t=t.body.data),t}},Object(c.c)(["shechList","language","transportList"])),mounted:function(){},components:{}},d={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("section",{attrs:{id:"cent"}},[i("div",{staticClass:"box"},[i("div",{staticClass:"center"},[i("div",{staticClass:"logoText logo"},[i("img",{staticStyle:{height:"100px"},attrs:{src:t.logoImg}})]),t._v(" "),i("p",{staticClass:"logoText"},[t._v("运踪宝")]),t._v(" "),i("div",{staticClass:"saech"},[i("el-input",{staticClass:"saechIput",attrs:{placeholder:t.languageData.public.sechText},model:{value:t.input,callback:function(s){t.input=s},expression:"input"}}),t._v(" "),i("el-button",{staticClass:"saechBout",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(s){t.sechlistFn()}}}),t._v(" "),i("div",[i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showBox,expression:"showBox"}],staticClass:"listBox"},t._l(t.transport,function(s){return i("div",{staticClass:"list",staticStyle:{"text-align":"left","border-bottom":"1px solid #e1e1e1"},on:{click:function(i){t.goMap(s.id)}}},[i("span",{staticStyle:{margin:"0px 20px"}},[t._v(t._s(t.languageData.public.plalte)+"："+t._s(s.containerId))]),t._v(" "),i("span",[t._v(t._s(t.languageData.public.container)+"："+t._s(s.deviceNumber))])])}))])],1)],1)])])])])},staticRenderFns:[]},m=i("VU/8")(p,d,!1,function(t){i("a2Yd")},"data-v-4c970b6f",null).exports,v={name:"my-map",created:function(){this.check=this.$route.name;var t=r.a.publicLo.sessionStorageGet("user");t&&(t=JSON.parse(t),this.user={nickName:t.nickName,headImg:t.headImg,id:t.userId})},data:function(){return{mapDate:null,platform:null,behavior:null,defaultLayers:null,ui:null,list2:[],ULlist:{first:{lat:null,lng:null,ymd:null,hms:null,location:null},list:[],last:{lat:null,lng:null,ymd:null,hms:null,location:null},listCnut:null},dataChart:{containerId:null,transportStatus:null,deviceNumber:null,startTime:null},bubble:null,routeInstructionsContainer:null,input:null,firstSech:!0,clickText:"共10个位置",clickStatus:!1,showBox:!1,user:{nickName:null,headImg:null,id:null}}},methods:l()({},Object(c.b)({mapListpost:"mapListFn",checkID:"checkId",checkNumber:"checkNumber"}),{mapFn:function(t,s){s?t.setCenter({lat:s.lat,lng:s.lng}):t.setCenter({lat:52.516,lng:13.3779}),t.setZoom(13),t.setBaseLayer(this.defaultLayers.normal.traffic)},mapService:function(){var t=document.getElementById("map");this.platform=new H.service.Platform({app_id:"X6Xrn8u6EXOVQmSMPlIP",app_code:"_z8PSLTydAFciEMziLSSlg"}),this.defaultLayers=this.platform.createDefaultLayers(),this.map=new H.Map(t,this.defaultLayers.normal.map),this.behavior=new H.mapevents.Behavior(new H.mapevents.MapEvents(this.map)),this.ui=H.ui.UI.createDefault(this.map,this.defaultLayers),this.mapFn(this.map)},cityFn:function(){this.$http.get("/api/cityList",{headers:{}}).then(function(t){})},calculateRouteFromAtoB:function(t){t.getRoutingService().calculateRoute({mode:"fastest;car",representation:"display",routeattributes:"waypoints,summary,shape,legs",maneuverattributes:"direction,action",waypoint0:"52.5160,13.3779",waypoint1:"52.5206,13.3862"},this.onSuccess,this.onError)},addRouteShapeToMap:function(t){var s,i=new H.geo.LineString;t.forEach(function(t){i.pushLatLngAlt(t.lat,t.lng)}),s=new H.map.Polyline(i,{style:{lineWidth:4,strokeColor:"rgba(0, 128, 255, 0.7)"}}),this.map.addObject(s),this.map.setViewBounds(s.getBounds(),!0)},addManueversToMap:function(t){var s=this,i=new H.map.Icon('<svg width="18" height="18" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="8" r="8" fill="#0077ff" stroke="white" stroke-width="1"  /></svg>',{anchor:{x:8,y:8}}),e=new H.map.Group;for(var a in t){var n=new H.map.Marker({lat:t[a].lat,lng:t[a].lng},{icon:i});n.instruction='<p style="font-size: 14px;text-align: left">当前:'+t[a].location+"</p>",n.instruction+='<p style="font-size: 12px;text-align: left">更新时间:'+t[a].ymd+t[a].hms+"</p>",e.addObject(n),a==t.length-1&&this.openBubble({lat:t[a].lat,lng:t[a].lng},n.instruction)}e.addEventListener("tap",function(t){s.map.setCenter(t.target.getPosition()),s.openBubble(t.target.getPosition(),t.target.instruction)},!1),this.map.addObject(e)},onSuccess:function(t){var s=t.response.route[0];this.addRouteShapeToMap(s),this.addManueversToMap(s)},onError:function(){alert("Ooops!")},openBubble:function(t,s){this.bubble?(this.bubble.setPosition(t),this.bubble.setContent(s),this.bubble.open()):(this.bubble=new H.ui.InfoBubble(t,{content:s,style:"color:#999"}),this.ui.addBubble(this.bubble))},saechFn:function(){this.showBox=!this.showBox;var t=this.input;if(!(t=t.replace(/(^\s*)|(\s*$)/g,"")))return!1;var s={code:this.input};this.$store.commit("transportListTo",null),this.user.id?this.checkNumber(s):this.checkID(s)},listFn:function(t){var s={id:t};this.showBox=!this.showBox,this.$store.commit("addMapList",null),this.mapListpost(s)},opentList:function(){var t=(e=document.getElementById("ul")).scrollHeight,s=document.getElementById("sty"),i="";if(!this.clickStatus)return t>300&&(e.style="height：300px;overflow-y:scroll",t=300),i+="#bodyBox #ul{ height:0px; animation: myA 1s forwards;  } @keyframes myA {0%{height: 0px;} 100%{height: "+t+"px;}",s.innerHTML=i,this.clickStatus=!0,"Chinese"==this.languageCheak&&(this.clickText="点击收起"),"English"==this.languageCheak&&(this.clickText="Fold"),!1;var e=document.getElementById("ul");if(i+="",(s=document.getElementById("sty")).innerHTML=i,this.clickStatus=!1,"Chinese"==this.languageCheak){var a=this.ULlist.listCnut-2;this.clickText="共 "+a+" 个位置"}if("English"==this.languageCheak){a=this.ULlist.listCnut-2;this.clickText=a+" tracking event"}},mapListDate:function(t){var s=[],i={ymd:"",hms:""};(t=t.body.data).startTime&&(i=r.a.publicLo.timeCheng(t.startTime));var e={containerId:t.containerId,transportStatus:t.transportStatus,deviceNumber:t.deviceNumber,startTime:i.ymd+i.hms};this.dataChart=e;var a={first:null,list:[],last:null,listCnut:null},n=(t=t.tracks).length;if(t.length>0){for(var l in t){var o=r.a.publicLo.timeCheng(t[l].time),c={lat:t[l].latitude,lng:t[l].longitude,ymd:o.ymd,hms:o.hms,location:t[l].location||"异常位置"+l};0==l&&(a.first=c,a.last={lat:null,lng:null,ymd:null,hms:null,location:null},this.map&&this.mapFn(this.map,c)),l>=n-1&&n>1&&(a.last=c,a.listCnut=n),l>0&&l<n-1&&a.list.push(c),s.push(c)}this.ULlist=a,s.length>1&&this.addRouteShapeToMap(s),this.addManueversToMap(s)}if("Chinese"==this.languageCheak){var u=this.ULlist.listCnut-2;this.clickText="共 "+u+" 个位置"}if("English"==this.languageCheak){u=this.ULlist.listCnut-2;this.clickText=u+" tracking event"}},updateMap:function(t){var s='<p style="font-size: 14px;text-align: left">当前:'+t.location+"</p>";s+='<p style="font-size: 12px;text-align: left">更新时间:'+t.ymd+t.hms+"</p>",this.map.setCenter({lat:t.lat,lng:t.lng}),this.openBubble({lat:t.lat,lng:t.lng},s)}}),computed:l()({deviceId:function(){var t=this.shechIput,s=null;return t&&(s=t,this.firstSech=!1,this.input=t),s},languageData:function(){var t=this.language;return t&&(this.languageCheak=t.check,"Chinese"==t.check&&(t=t.Chinese),"English"==t.check&&(t=t.English)),t},mapLi:function(){var t=this.mapList;if(t){if(a()(this.list2)!=a()(t)){this.list2=t;a()(this.fisrtList)!=a()(t.body)&&(this.mapDate?this.mapListDate(t):this.id||this.mapDate?this.id&&!this.mapDate&&(this.mapDate=t,this.mapListDate(t)):this.input?this.mapListDate(t):this.mapDate=t,this.fisrtList=t.body)}}return 1},transport:function(){var t=this.transportList||null;return t&&(t=t.body.data),t}},Object(c.c)(["shechIput","language","mapList","transportList"])),mounted:function(){var t=document.documentElement.clientHeight;if(t-=52,document.getElementById("map").style.height=t+"px",this.mapService(),this.id=this.$route.query.id,this.id){var s={id:this.id};this.firstSech=!1,this.mapListpost(s),this.mapDate&&this.mapListDate(this.mapDate)}},components:{HeaderPublc:o.a,saechFirst:m}},g={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("section",{attrs:{id:"bodyBox"}},[i("section",{staticClass:"header"},[i("HeaderPublc")],1),t._v(" "),i("section",{staticClass:"cent"},[i("div",{attrs:{id:"map"}}),t._v(" "),i("div",{attrs:{id:"plan"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.firstSech,expression:"!firstSech"}],staticClass:"saech",attrs:{deviceId:t.deviceId}},[i("el-input",{staticClass:"saechIput",attrs:{placeholder:t.languageData.public.sechText},model:{value:t.input,callback:function(s){t.input=s},expression:"input"}}),t._v(" "),i("el-button",{staticClass:"saechBout",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(s){t.saechFn()}}}),t._v(" "),i("div",[i("el-collapse-transition",{attrs:{height:"200"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showBox,expression:"showBox"}],staticClass:"listBox"},t._l(t.transport,function(s){return i("div",{staticClass:"list",staticStyle:{"text-align":"left","border-bottom":"1px solid #e1e1e1"},on:{click:function(i){t.listFn(s.id)}}},[i("span",{staticStyle:{margin:"0px 20px"}},[t._v(t._s(t.languageData.public.plalte)+"："+t._s(s.containerId))]),t._v(" "),i("span",[t._v(t._s(t.languageData.public.container)+"："+t._s(s.deviceNumber))])])}))])],1)],1),t._v(" "),i("section",{directives:[{name:"show",rawName:"v-show",value:!t.firstSech,expression:"!firstSech"}],attrs:{id:"list"}},[i("div",{staticClass:"listTop"},[i("p",[i("label",[t._v(" "+t._s(t.languageData.public.container)+"：")]),t._v(" "),i("span",[t._v(t._s(t.dataChart.deviceNumber))])]),t._v(" "),i("p",[i("label",[t._v(" "+t._s(t.languageData.public.plalte)+"：")]),t._v(" "),i("span",[t._v(t._s(t.dataChart.containerId))])]),t._v(" "),i("p",[i("label",[t._v(" "+t._s(t.languageData.public.status)+"：")]),t._v(" "),i("span",{staticClass:"status"},[t._v(t._s(0==t.dataChart.transportStatus?"运输中":1==t.dataChart.transportStatus?"运输完成":null==t.dataChart.transportStatus?"":"异常"))])]),t._v(" "),i("p",[i("label",[t._v(" "+t._s(t.languageData.public.creaedTime)+"：")]),t._v(" "),i("span"),t._v(t._s(t.dataChart.startTime))]),t._v(" "),i("span",{staticClass:"bot"},[t._v(" "+t._s(t.languageData.public.copy)+" ")])]),t._v(" "),i("div",{staticClass:"listCent"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.ULlist.first.location,expression:"ULlist.first.location"}],staticClass:"listBoder"},[i("div",{staticClass:"first padding",on:{click:function(s){t.updateMap(t.ULlist.first)}}},[i("p",[t._v(t._s(t.ULlist.first.location))]),i("i",{staticClass:"time",staticStyle:{right:"25px"}},[t._v(t._s(t.ULlist.first.ymd)+" "+t._s(t.ULlist.first.hms))]),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"aimintUl ",attrs:{mapLi:t.mapLi}},[i("ul",{directives:[{name:"show",rawName:"v-show",value:t.ULlist.list.length>0,expression:"ULlist.list.length>0"}],staticClass:"padding",attrs:{id:"ul"}},t._l(t.ULlist.list,function(s){return i("li",{on:{click:function(i){t.updateMap(s)}}},[i("p",[t._v(t._s(s.location))]),i("i",{staticClass:"time"},[t._v(t._s(s.ymd)+" "+t._s(s.hms))]),t._v(" "),i("div",{staticClass:"ricM"})])}))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.ULlist.listCnut,expression:"ULlist.listCnut"}],staticClass:"next padding"},[i("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.clickText))]),t._v(" "),i("span",{class:{"el-icon-arrow-up":t.clickStatus,"el-icon-arrow-down":!t.clickStatus},on:{click:function(s){t.opentList()}}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.ULlist.last.location,expression:"ULlist.last.location"}],staticClass:"last padding",on:{click:function(s){t.updateMap(t.ULlist.last)}}},[i("p",{},[t._v(t._s(t.ULlist.last.location))]),t._v(" "),i("i",{staticClass:"time",staticStyle:{right:"25px"}},[t._v(t._s(t.ULlist.last.ymd)+" "+t._s(t.ULlist.last.hms))]),t._v(" "),t._m(1)])]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.ULlist.first.location,expression:"!ULlist.first.location"}]},[t._v("暂无数据")])]),t._v(" "),i("div",{staticClass:"listFooter"},[i("el-button",{attrs:{round:""}},[t._v(t._s(t.languageData.public.exportCSV))])],1)]),t._v(" "),i("section",{directives:[{name:"show",rawName:"v-show",value:t.firstSech,expression:"firstSech"}],attrs:{id:"saechFirst"}},[i("saechFirst")],1)])]),t._v(" "),i("section",{staticClass:"footer"})])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"ricBoder"},[s("div",{staticClass:"ric"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"ricBoder"},[s("div",{staticClass:"ric"})])}]},f=i("VU/8")(v,g,!1,function(t){i("POKb")},"data-v-5a9c1437",null);s.default=f.exports},"yKu/":function(t,s,i){t.exports=i.p+"static/img/logo180.2433c53.png"}});
//# sourceMappingURL=1.c40615432dc2b27b8352.js.map